params {
    save                = true
    saveDir             = "data"
    publish_dir_mode    = "copy"
    prot                = "data/uniprot-keyword Virus+entry+into+host+cell+[KW-1160] +fragment no.tab.gz"
    protedi             = "data/Viral+attachment+to+host+cell+[KW-1161].tab.gz"
    ncbiVirus           = "data/sequences.csv"
    eID                 = "data/virus_host_4rm_untitled.csv"
    virusDB             = "data/virushostdb.tsv"
    fasta               = "data/uniprot-keyword Virus+entry+into+host+cell+[KW-1160] +fragment no.fasta"
    GPU                 = "ON"
}

singularity {
    enabled      = true
    autoMounts   = true
}



process {
    container           = "containers/Zoonopred.sif"
    // containerOptions    = "--nv"
    withLabel: "with_cpus" {
        cpus            = 8
        memory          = "30G"
        maxForks        = 8
        errorStrategy   = "ignore"
        maxRetries      = 2
    }
  
    withLabel: "with_gpus" {
        cpus             = 8
        maxForks         = 2
        containerOptions = { workflow.containerEngine == "singularity" ? "--nv":
                           ( workflow.containerEngine == "docker" ? "--gpus all": null ) }
        errorStrategy    = "retry" // { sleep(3000); return 'retry' } // Dynamic Retry with backoff
    }
}

// Load base.config by default for all pipelines
includeConfig "conf/base.config"